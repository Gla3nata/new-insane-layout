(()=>{"use strict";const e=()=>{const e=document.querySelectorAll(".popup"),t=t=>{e.forEach(e=>e.classList.remove("popup--active"));const o=document.querySelector(t);o&&o.classList.add("popup--active")},o=()=>{e.forEach(e=>e.classList.remove("popup--active"))};return document.addEventListener("click",e=>{const r=e.target;(r.closest(".menu__icon")||r.closest(".menu__title"))&&t(".popup-menu"),r.closest(".portfolio-slider__slide-frame")&&t(".popup-portfolio"),r.closest(".transparency-item")&&t(".popup-transparency"),r.closest(".button_wide")&&t(".popup-consultation"),r.closest(".link-privacy")&&t(".popup-privacy"),(r.closest(".close")||r.classList.contains("popup"))&&o()}),{openModal:t,closeModal:o}},t=(e(),e()),o=({formId:e})=>{const o=document.getElementById(e);o&&o.addEventListener("submit",async r=>{r.preventDefault();const c=o.querySelector('input[type="checkbox"]');if(c){if(c.hasAttribute("required")&&!c.checked)return void alert("Необходимо согласие с условиями!");if(!c.checked)return void alert("Необходимо согласие с условиями!")}const n=new FormData(o),s=Object.fromEntries(n.entries());s.formId=e;try{await fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t.openModal(".popup-thank"),console.log("modalController"),o.reset()}catch{alert("Ошибка отправки формы")}})};(()=>{const e=document.querySelector(".popup-repair-types"),t=document.querySelector(".popup-menu"),o=document.querySelectorAll(".link-list-menu a, .link-list-repair a"),r=e?.querySelectorAll(".close");if(!e||!o.length)return;const c=o=>{o.preventDefault(),t&&t.classList.remove("popup--active"),e.classList.add("popup--active")};o.forEach(e=>{e.addEventListener("click",c)}),r&&r.forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("popup--active")})}),e.addEventListener("click",t=>{t.target===e&&e.classList.remove("popup--active")})})(),(()=>{const e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord");e&&t&&e.addEventListener("click",()=>{t.classList.toggle("header-contacts__phone-number-accord--active"),e.classList.toggle("header-contacts__arrow--active")})})(),(()=>{const e=document.querySelectorAll('a[href^="#"]'),t=document.querySelector(".popup-menu");e.length&&e.forEach(e=>{e.addEventListener("click",o=>{const r=e.getAttribute("href");if(!r||"#"===r)return;const c=document.querySelector(r);t&&t.classList.contains("popup--active")&&t.classList.remove("popup--active");const n=window.pageYOffset,s=c.getBoundingClientRect().top;let l=null;const a=e=>{null===l&&(l=e);const t=e-l,o=i(t,n,s,800);window.scrollTo(0,o),t<800&&requestAnimationFrame(a)},i=(e,t,o,r)=>(e/=r/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t;requestAnimationFrame(a)})})})(),(()=>{const e=document.querySelector("#faq");if(!e)return;const t=e.querySelectorAll(".title_block");t.forEach(e=>{e.addEventListener("click",()=>{const o=e.closest("li");if(!o)return;const r=o.querySelector(".msg");r&&(t.forEach(t=>{t!==e&&(t.closest("li").querySelector(".msg").classList.remove("--active"),t.classList.remove("msg-active"))}),r.classList.toggle("--active"),e.classList.toggle("msg-active"))})})})(),(()=>{const e=document.querySelectorAll('input[name="phone"]');if(!e.length)return;const t=e=>{const t=e.target,o="+7 (___) ___-__-__";let r=0;const c=o.replace(/\D/g,"");let n=t.value.replace(/\D/g,"");var s,l;c.length>=n.length&&(n=c),t.value=o.replace(/./g,e=>/[_\d]/.test(e)&&r<n.length?n.charAt(r++):r>=n.length?"":e),"blur"===e.type&&t.value.length<18?t.value="":(s=t.value.length,(l=t).focus(),l.setSelectionRange(s,s))};e.forEach(e=>{e.addEventListener("input",t),e.addEventListener("blur",t)})})(),(()=>{const e=document.querySelectorAll(".formula-item");e.length&&e.forEach(e=>{const t=e.querySelector(".formula-item-popup");t&&(e.addEventListener("mouseenter",e=>{t.style.visibility="visible",t.style.opacity="1",function(e){e.getBoundingClientRect().top<0?(e.style.top="100%",e.style.bottom="auto"):(e.style.bottom="100%",e.style.top="auto")}(t)}),e.addEventListener("mouseleave",()=>{t.style.visibility="hidden",t.style.opacity="0",t.style.top="",t.style.bottom=""}))})})(),(()=>{const e=document.querySelector(".formula-slider"),t=e.querySelectorAll(".formula-item"),o=document.getElementById("formula-arrow_left"),r=document.getElementById("formula-arrow_right");let c=0;const n=e=>{t.forEach(e=>e.classList.remove("active-item")),t[e].classList.add("active-item"),a()},s=()=>window.innerWidth<576,l=()=>{s()&&n(c)},a=()=>{const o=t[0].offsetWidth;e.style.transform=`translateX(-${c*o}px)`};r.addEventListener("click",()=>{s()&&(c=(c+1)%t.length,n(c))}),o.addEventListener("click",()=>{s()&&(c=(c-1+t.length)%t.length,n(c))}),window.addEventListener("resize",l),l()})(),(()=>{const e=document.querySelectorAll(".repair-types-nav__item"),t=document.querySelectorAll(".types-repair1, .types-repair2, .types-repair3, .types-repair4, .types-repair5"),o=document.querySelector(".slider-counter-content__current"),r=document.querySelector(".slider-counter-content__total"),c=document.getElementById("repair-types-arrow_left"),n=document.getElementById("repair-types-arrow_right"),s=document.getElementById("nav-arrow-repair-left_base"),l=document.getElementById("nav-arrow-repair-right_base"),a=document.querySelector(".nav-list-repair");let i=0;const d=t=>{e.forEach(e=>e.classList.remove("active")),e[t].classList.add("active"),y()};if(!e.length||!t.length)return;let u=0,p=0;const m=()=>window.innerWidth<576,y=()=>{const t=e[0].offsetWidth;a.style.transform=`translateX(-${i*t}px)`};l.addEventListener("click",()=>{m()&&(i=(i+1)%e.length,d(i))}),s.addEventListener("click",()=>{m()&&(i=(i-1+e.length)%e.length,d(i))});const v=()=>t[u].querySelectorAll(".repair-types-slider__slide").length,f=e=>{t.forEach(e=>{e.style.display="none"}),t[e]&&(t[e].style.display="block")},h=t=>{e.forEach(e=>e.classList.remove("active")),e[t].classList.add("active")},g=e=>{const c=t[u].querySelectorAll(".repair-types-slider__slide"),n=v();e<0&&(e=n-1),e>=n&&(e=0),c.forEach(e=>{e.style.display="none",e.style.opacity="0"}),c[e]&&(c[e].style.display="block",setTimeout(()=>{c[e].style.opacity="1"},10)),p=e,(()=>{if(!o||!r)return;const e=v();o.textContent=p+1,r.textContent=e})()};e.forEach((e,t)=>{e.addEventListener("click",()=>{u=t,p=0,f(t),h(t),g(0)})}),f(0),h(0),g(0),c&&c.addEventListener("click",()=>{const e=v();let t=p-1;t<0&&(t=e-1),g(t)}),n&&n.addEventListener("click",()=>{const e=v();let t=p+1;t>=e&&(t=0),g(t)}),m()&&d(i)})(),o({formId:"feedback1"}),o({formId:"feedback2"}),o({formId:"feedback3"}),o({formId:"feedback4"}),o({formId:"feedback5"}),o({formId:"feedback6"})})();