(()=>{"use strict";const e=({formId:e})=>{const t=document.getElementById(e);t&&t.addEventListener("submit",async c=>{c.preventDefault();const o=t.querySelector('input[type="checkbox"]');if(o){if(o.hasAttribute("required")&&!o.checked)return highlightCheckboxError(o),void alert("Необходимо согласие с условиями!");if(!o.checked)return void alert("Необходимо согласие с условиями!")}const r=new FormData(t),s=Object.fromEntries(r.entries());s.formId=e;try{await fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),alert("Форма отправлена!"),t.reset()}catch{alert("Ошибка отправки формы")}})};(()=>{const e=document.querySelector(".popup-repair-types"),t=document.querySelector(".popup-menu"),c=document.querySelectorAll(".link-list-menu a, .link-list-repair a"),o=e?.querySelectorAll(".close");if(!e||!c.length)return;const r=c=>{c.preventDefault(),t&&t.classList.remove("popup--active"),e.classList.add("popup--active")};c.forEach(e=>{e.addEventListener("click",r)}),o&&o.forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("popup--active")})}),e.addEventListener("click",t=>{t.target===e&&e.classList.remove("popup--active")})})(),(()=>{const e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord");e&&t&&e.addEventListener("click",()=>{t.classList.toggle("header-contacts__phone-number-accord--active"),e.classList.toggle("header-contacts__arrow--active")})})(),(()=>{const e=document.querySelectorAll('a[href^="#"]'),t=document.querySelector(".popup-menu");e.length&&e.forEach(e=>{e.addEventListener("click",c=>{const o=e.getAttribute("href");if(!o||"#"===o)return;const r=document.querySelector(o);t&&t.classList.contains("popup--active")&&t.classList.remove("popup--active");const s=window.pageYOffset,n=r.getBoundingClientRect().top;let a=null;const l=e=>{null===a&&(a=e);const t=e-a,c=i(t,s,n,800);window.scrollTo(0,c),t<800&&requestAnimationFrame(l)},i=(e,t,c,o)=>(e/=o/2)<1?c/2*e*e+t:-c/2*(--e*(e-2)-1)+t;requestAnimationFrame(l)})})})(),(()=>{const e=document.querySelector("#faq");if(!e)return;const t=e.querySelectorAll(".title_block");t.forEach(e=>{e.addEventListener("click",()=>{const c=e.closest("li");if(!c)return;const o=c.querySelector(".msg");o&&(t.forEach(t=>{t!==e&&(t.closest("li").querySelector(".msg").classList.remove("--active"),t.classList.remove("msg-active"))}),o.classList.toggle("--active"),e.classList.toggle("msg-active"))})})})(),(()=>{const e=document.querySelectorAll('input[name="phone"]');if(!e.length)return;const t=e=>{const t=e.target,c="+7 (___) ___-__-__";let o=0;const r=c.replace(/\D/g,"");let s=t.value.replace(/\D/g,"");var n,a;r.length>=s.length&&(s=r),t.value=c.replace(/./g,e=>/[_\d]/.test(e)&&o<s.length?s.charAt(o++):o>=s.length?"":e),"blur"===e.type&&t.value.length<18?t.value="":(n=t.value.length,(a=t).focus(),a.setSelectionRange(n,n))};e.forEach(e=>{e.addEventListener("input",t),e.addEventListener("blur",t)})})(),e({formId:"feedback1"}),e({formId:"feedback2"}),e({formId:"feedback3"}),e({formId:"feedback4"}),e({formId:"feedback5"}),e({formId:"feedback6"}),(()=>{const e=document.querySelectorAll(".popup"),t=t=>{e.forEach(e=>e.classList.remove("popup--active"));const c=document.querySelector(t);c&&(c.classList.add("popup--active"),body.style.overflow="hidden")},c=()=>{e.forEach(e=>e.classList.remove("popup--active"))};document.addEventListener("click",e=>{const o=e.target;(o.closest(".menu__icon")||o.closest(".menu__title"))&&t(".popup-menu"),o.closest(".link-privacy")&&t(".popup-privacy"),o.closest(".close")&&c(),o.classList.contains("popup")&&c()})})()})();