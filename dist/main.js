(()=>{"use strict";const e=()=>{const e=document.body,t=document.querySelectorAll(".popup"),o=o=>{t.forEach(e=>e.classList.remove("popup--active"));const c=document.querySelector(o);c&&(c.classList.add("popup--active"),e.style.overflow="hidden")},c=()=>{t.forEach(e=>e.classList.remove("popup--active")),e.style.overflow=""};return document.addEventListener("click",e=>{const t=e.target;(t.closest(".menu__icon")||t.closest(".menu__title"))&&o(".popup-menu"),t.closest(".item-hover img")&&o(".popup-portfolio"),t.closest(".transparency-item")&&o(".popup-transparency"),t.closest(".button_wide")&&o(".popup-consultation"),t.closest(".link-privacy")&&o(".popup-privacy"),(t.closest(".close")||t.classList.contains("popup"))&&c()}),{openModal:o,closeModal:c}},t=(e(),()=>{const e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord");e&&t&&e.addEventListener("click",()=>{t.classList.toggle("header-contacts__phone-number-accord--active"),e.classList.toggle("header-contacts__arrow--active")})}),o=e(),c=({formId:e})=>{const t=document.getElementById(e);t&&t.addEventListener("submit",async c=>{c.preventDefault();const r=t.querySelector('input[type="checkbox"]');if(r){if(r.hasAttribute("required")&&!r.checked)return void alert("Необходимо согласие с условиями!");if(!r.checked)return void alert("Необходимо согласие с условиями!")}const n=new FormData(t),s=Object.fromEntries(n.entries());s.formId=e;try{await fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o.openModal(".popup-thank"),console.log("modalController"),t.reset()}catch{alert("Ошибка отправки формы")}})};(()=>{const e=document.querySelector(".popup-repair-types"),t=document.querySelector(".popup-menu"),o=document.querySelectorAll(".link-list-menu a, .link-list-repair a"),c=e?.querySelectorAll(".close");if(!e||!o.length)return;const r=o=>{o.preventDefault(),t&&t.classList.remove("popup--active"),e.classList.add("popup--active")};o.forEach(e=>{e.addEventListener("click",r)}),c&&c.forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("popup--active")})}),e.addEventListener("click",t=>{t.target===e&&e.classList.remove("popup--active")})})(),t(),(()=>{const e=document.querySelectorAll('a[href^="#"]'),t=document.querySelector(".popup-menu");e.length&&e.forEach(e=>{e.addEventListener("click",o=>{const c=e.getAttribute("href");if(!c||"#"===c)return;const r=document.querySelector(c);t&&t.classList.contains("popup--active")&&t.classList.remove("popup--active");const n=window.pageYOffset,s=r.getBoundingClientRect().top;let l=null;const a=e=>{null===l&&(l=e);const t=e-l,o=i(t,n,s,800);window.scrollTo(0,o),t<800&&requestAnimationFrame(a)},i=(e,t,o,c)=>(e/=c/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t;requestAnimationFrame(a)})})})(),(()=>{const e=document.querySelector("#faq");if(!e)return;const t=e.querySelectorAll(".title_block");t.forEach(e=>{e.addEventListener("click",()=>{const o=e.closest("li");if(!o)return;const c=o.querySelector(".msg");c&&(t.forEach(t=>{t!==e&&(t.closest("li").querySelector(".msg").classList.remove("--active"),t.classList.remove("msg-active"))}),c.classList.toggle("--active"),e.classList.toggle("msg-active"))})})})(),(()=>{const e=document.querySelectorAll('input[name="phone"]');if(!e.length)return;const t=e=>{const t=e.target,o="+7 (___) ___-__-__";let c=0;const r=o.replace(/\D/g,"");let n=t.value.replace(/\D/g,"");var s,l;r.length>=n.length&&(n=r),t.value=o.replace(/./g,e=>/[_\d]/.test(e)&&c<n.length?n.charAt(c++):c>=n.length?"":e),"blur"===e.type&&t.value.length<18?t.value="":(s=t.value.length,(l=t).focus(),l.setSelectionRange(s,s))};e.forEach(e=>{e.addEventListener("input",t),e.addEventListener("blur",t)})})(),(()=>{const e=document.querySelectorAll('a[href^="#"]');document.querySelector(".popup-menu"),console.log(e)})(),c({formId:"feedback1"}),c({formId:"feedback2"}),c({formId:"feedback3"}),c({formId:"feedback4"}),c({formId:"feedback5"}),c({formId:"feedback6"})})();